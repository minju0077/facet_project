
<!-- =========================
  (6) support-history.html | 소비자 문의 내역
  - Facet 톤(Accent #A39382 / 미니멀 / 대문자 트래킹) 유지
  - "기획 기준" UI: 검색/필터/정렬/상세보기/새 문의(링크)/상태 표시/빈 상태
========================= -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>문의 내역 | Facet</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700&display=swap');

    :root{
      --accent-color:#A39382;
      --accent-hover:#8E7F70;
      --bg-light:#ffffff;
      --text-main:#1a1a1a;
      --text-soft:#3a3a3a;
      --border-color:#eeeeee;
      --chip-bg:#FBFAF9;
    }

    body{
      font-family:'Noto Sans KR',sans-serif;
      background:var(--bg-light);
      color:var(--text-main);
      margin:0;
      word-break:keep-all;
    }

    .accent-text{color:var(--accent-color);}
    .accent-bg{background:var(--accent-color);}
    .border-accent{border-color:var(--accent-color);}

    .btn-outline{
      transition:all .35s cubic-bezier(.165,.84,.44,1);
      border:1px solid var(--accent-color);
      color:var(--accent-color);
      background:transparent;
    }
    .btn-outline:hover{
      background:var(--accent-color);
      color:#fff;
      box-shadow:0 10px 20px rgba(163,147,130,.18);
      transform:translateY(-2px);
    }

    .btn-ghost{
      border:1px solid var(--border-color);
      background:#fff;
      transition:all .25s ease;
    }
    .btn-ghost:hover{
      border-color:var(--accent-color);
      color:var(--accent-color);
      transform:translateY(-1px);
      box-shadow:0 10px 18px rgba(0,0,0,.04);
    }

    .nav-link{
      color:#6b7280;
      transition:all .25s ease;
      position:relative;
      padding:6px 0;
    }
    .nav-link:hover{ color:var(--text-main); }
    .nav-link.active{ color:var(--text-main); }
    .nav-link.active::after{
      content:"";
      position:absolute;
      left:0;
      bottom:-6px;
      width:100%;
      height:2px;
      background:var(--accent-color);
      border-radius:2px;
      box-shadow:0 6px 16px rgba(163,147,130,.25);
    }

    .icon-btn{
      width:40px;height:40px;
      display:inline-flex;
      align-items:center;justify-content:center;
      border:1px solid rgba(163,147,130,.35);
      background:#fff;color:var(--accent-color);
      border-radius:9999px;
      transition:all .25s ease;
    }
    .icon-btn:hover{
      background:var(--accent-color);
      color:#fff;
      border-color:var(--accent-color);
      transform:translateY(-2px);
      box-shadow:0 12px 22px rgba(163,147,130,.22);
    }
    .icon-badge{
      position:absolute;
      top:-6px;right:-6px;
      min-width:18px;height:18px;
      padding:0 6px;border-radius:9999px;
      background:var(--accent-color);
      color:#fff;font-size:10px;line-height:18px;
      text-align:center;
      box-shadow:0 10px 18px rgba(163,147,130,.25);
    }

    .chip{
      background:var(--chip-bg);
      border:1px solid var(--border-color);
      color:#6b7280;
      transition:all .2s ease;
    }
    .chip:hover{
      border-color:var(--accent-color);
      color:var(--accent-color);
      box-shadow:0 10px 18px rgba(0,0,0,.03);
    }
    .chip.active{
      border-color:var(--accent-color);
      color:var(--accent-color);
      background:#fff;
      box-shadow:0 10px 18px rgba(163,147,130,.08);
    }

    .card{
      border:1px solid var(--border-color);
      background:#fff;
      transition:all .25s ease;
    }
    .card:hover{
      border-color:rgba(163,147,130,.55);
      box-shadow:0 18px 40px rgba(0,0,0,.06);
      transform:translateY(-2px);
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:6px 10px;
      font-size:10px;
      text-transform:uppercase;
      letter-spacing:.2em;
      border-radius:9999px;
      border:1px solid var(--border-color);
      background:#fff;
      color:#6b7280;
    }
    .badge.open{ border-color:rgba(163,147,130,.45); color:var(--accent-color); background:#FBFAF9; }
    .badge.pending{ border-color:#e5e7eb; color:#111827; background:#f9fafb; }
    .badge.done{ border-color:#e5e7eb; color:#6b7280; background:#fff; }
    .badge.urgent{ border-color:rgba(163,147,130,.45); color:#fff; background:var(--accent-color); }

    /* Modal */
    .modal-backdrop{
      position:fixed; inset:0;
      background:rgba(0,0,0,.35);
      display:none;
      align-items:center;
      justify-content:center;
      padding:24px;
      z-index:100;
    }
    .modal-backdrop.show{ display:flex; }
    .modal{
      width:min(920px, 100%);
      background:#fff;
      border:1px solid var(--border-color);
      box-shadow:0 30px 80px rgba(0,0,0,.18);
    }
    .modal-close{
      border:1px solid var(--border-color);
      width:38px;height:38px;
      border-radius:9999px;
      display:flex; align-items:center; justify-content:center;
      transition:all .2s ease;
      background:#fff;
    }
    .modal-close:hover{
      border-color:var(--accent-color);
      color:var(--accent-color);
      transform:translateY(-1px);
    }

    ::-webkit-scrollbar{ width:6px; }
    ::-webkit-scrollbar-track{ background:#f8f8f8; }
    ::-webkit-scrollbar-thumb{ background:var(--accent-color); border-radius:3px; }
  </style>
</head>

<body>
  <!-- Header (mypage 톤 유지) -->
  <header class="border-b border-gray-100 py-6 px-10 flex justify-between items-center bg-white/90 backdrop-blur-md sticky top-0 z-50">
    <a href="index.html" class="text-2xl font-bold tracking-[0.2em] accent-text uppercase">Facet</a>

    <nav class="hidden md:flex space-x-10 text-[11px] uppercase tracking-[0.2em] font-medium">
      <a href="list.html" class="nav-link">Shop</a>
      <a href="list.html" class="nav-link">Auction</a>
      <a href="support.html" class="nav-link">Support</a>
      <a href="mypage.html" class="nav-link active">My</a>
    </nav>

    <div class="flex items-center gap-3">
      <a href="list.html" class="relative icon-btn" aria-label="Search">
        <i class="fa-solid fa-magnifying-glass text-[15px]"></i>
      </a>

      <a href="mypage.html" class="relative icon-btn" aria-label="My page">
        <i class="fa-regular fa-user text-[15px]"></i>
      </a>

      <a href="cart.html" class="relative icon-btn" aria-label="Cart">
        <i class="fa-solid fa-bag-shopping text-[15px]"></i>
        <span class="icon-badge">2</span>
      </a>
    </div>
  </header>

  <main class="max-w-7xl mx-auto py-16 px-6 lg:px-10">
    <!-- Breadcrumb -->
    <nav class="text-[10px] text-gray-400 mb-10 uppercase tracking-[0.2em]">
      Home / My / <span class="text-black font-medium">Support Tickets</span>
    </nav>

    <div class="grid grid-cols-1 lg:grid-cols-12 gap-10">
      <!-- Left: My Side -->
      <aside class="lg:col-span-4 border border-gray-100 bg-white shadow-sm p-8">
        <div class="flex items-center gap-4">
          <div class="w-14 h-14 rounded-full bg-gray-100 border border-gray-200"></div>
          <div>
            <p class="text-sm text-gray-400 uppercase tracking-[0.2em]">Member</p>
            <p class="text-xl font-medium text-black">Eunseo</p>
            <p class="text-xs text-gray-500 mt-1">level: Silver</p>
          </div>
        </div>

        <div class="mt-10 space-y-3 text-sm">
          <a href="mypage.html" class="block py-3 px-4 border border-gray-100 hover:border-gray-200 transition">내 정보</a>
          <a href="orders.html" class="block py-3 px-4 border border-gray-100 hover:border-gray-200 transition">주문/배송</a>
          <a href="bids.html" class="block py-3 px-4 border border-gray-100 hover:border-gray-200 transition">입찰/낙찰</a>
          <a href="wishlist.html" class="block py-3 px-4 border border-gray-100 hover:border-gray-200 transition">위시리스트</a>
          <a href="support-history.html" class="block py-3 px-4 border border-gray-200 bg-[#FBFAF9] font-medium">문의 내역</a>
        </div>

        <button class="w-full mt-10 py-4 btn-outline font-bold text-[11px] tracking-[0.4em] uppercase">Edit Profile</button>

        <!-- Optional: Ticket Summary -->
        <div class="mt-10 border-t border-gray-100 pt-8">
          <p class="text-[10px] text-gray-400 uppercase tracking-[0.35em] mb-4">Ticket Summary</p>
          <div class="grid grid-cols-3 gap-3">
            <div class="border border-gray-100 p-4 text-center">
              <p class="text-[10px] text-gray-400 uppercase tracking-[0.2em]">Open</p>
              <p class="text-lg font-bold accent-text mt-1" id="sumOpen">2</p>
            </div>
            <div class="border border-gray-100 p-4 text-center">
              <p class="text-[10px] text-gray-400 uppercase tracking-[0.2em]">Pending</p>
              <p class="text-lg font-bold text-black mt-1" id="sumPending">1</p>
            </div>
            <div class="border border-gray-100 p-4 text-center">
              <p class="text-[10px] text-gray-400 uppercase tracking-[0.2em]">Done</p>
              <p class="text-lg font-bold text-black mt-1" id="sumDone">1</p>
            </div>
          </div>
        </div>
      </aside>

      <!-- Right: Tickets -->
      <section class="lg:col-span-8 space-y-10">
        <!-- Title + Actions -->
        <div class="border border-gray-100 bg-white shadow-sm p-8">
          <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-6">
            <div>
              <h1 class="text-2xl font-medium text-black">문의 내역</h1>
              <p class="text-sm text-gray-500 font-light mt-2">문의 진행 상태를 확인하고, 답변을 한 곳에서 관리할 수 있어요.</p>
            </div>

            <div class="flex items-center gap-2">
              <button id="btnDelete" class="btn-ghost px-4 py-3 text-[11px] font-bold uppercase tracking-[0.25em]">
                <i class="fa-regular fa-trash-can mr-2"></i>선택 삭제
              </button>
              <a href="support.html#ticket" class="btn-outline px-4 py-3 text-[11px] font-bold uppercase tracking-[0.25em]">
                <i class="fa-regular fa-pen-to-square mr-2"></i>새 문의
              </a>
            </div>
          </div>

          <!-- Filters Row -->
          <div class="mt-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
            <div class="flex items-center gap-2 flex-wrap">
              <button class="chip active px-4 py-2 rounded-full text-[11px] font-bold uppercase tracking-[0.2em]" data-filter="all">All</button>
              <button class="chip px-4 py-2 rounded-full text-[11px] font-bold uppercase tracking-[0.2em]" data-filter="open">Open</button>
              <button class="chip px-4 py-2 rounded-full text-[11px] font-bold uppercase tracking-[0.2em]" data-filter="pending">Pending</button>
              <button class="chip px-4 py-2 rounded-full text-[11px] font-bold uppercase tracking-[0.2em]" data-filter="done">Done</button>
              <button class="chip px-4 py-2 rounded-full text-[11px] font-bold uppercase tracking-[0.2em]" data-filter="urgent">Urgent</button>
            </div>

            <div class="flex items-center gap-3">
              <div class="relative">
                <i class="fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-[12px]"></i>
                <input id="search" type="text" placeholder="제목/카테고리/주문번호 검색"
                       class="w-[280px] bg-gray-50 border border-gray-100 rounded-full pl-9 pr-4 py-2 text-xs text-gray-800 focus:outline-none focus:border-[#A39382] transition-all">
              </div>

              <select id="sort" class="bg-white border border-gray-100 rounded-full px-4 py-2 text-xs text-gray-700 focus:outline-none focus:border-[#A39382] transition-all">
                <option value="recent">최근 등록순</option>
                <option value="status">상태순</option>
                <option value="oldest">오래된 순</option>
              </select>
            </div>
          </div>

          <!-- Tips -->
          <div class="mt-6 flex items-start justify-between border-t border-gray-100 pt-6 gap-6">
            <div>
              <p class="text-[11px] uppercase tracking-[0.25em] text-gray-400 font-bold">Notice</p>
              <p class="text-sm text-gray-500 font-light mt-2">
                답변은 영업일 기준 24시간 이내 제공을 목표로 하며, 보안/가품 신고는 우선 처리됩니다.
              </p>
            </div>
            <a href="support.html#faq" class="btn-ghost px-4 py-3 text-[11px] font-bold uppercase tracking-[0.25em] whitespace-nowrap">
              <i class="fa-regular fa-circle-question mr-2"></i>FAQ 보기
            </a>
          </div>
        </div>

        <!-- Ticket List -->
        <div class="space-y-4" id="list">

          <!-- Ticket 1 -->
          <article class="card p-6" data-status="open" data-urgent="false" data-title="배송지 변경 요청" data-category="배송/검수" data-order="BD-2026-0102-4821" data-date="2026-01-02">
            <div class="flex items-start gap-5">
              <label class="pt-1">
                <input class="pick" type="checkbox" aria-label="select ticket">
              </label>

              <div class="flex-1">
                <div class="flex items-center gap-2 mb-2 flex-wrap">
                  <span class="badge open"><i class="fa-regular fa-circle-dot"></i>Open</span>
                  <span class="badge"><i class="fa-regular fa-folder-open"></i>배송/검수</span>
                  <span class="badge"><i class="fa-regular fa-receipt"></i>Order BD-2026-0102-4821</span>
                </div>

                <button class="ticket-title text-left w-full">
                  <h3 class="text-lg font-medium text-black hover:accent-text transition">배송지 변경 요청</h3>
                </button>
                <p class="text-sm text-gray-500 font-light mt-2">
                  낙찰 주문 배송지 주소를 변경하고 싶습니다. 출고 전 반영 가능할까요?
                </p>

                <div class="mt-4 flex items-center justify-between">
                  <p class="text-[11px] uppercase tracking-[0.2em] text-gray-400">Created</p>
                  <p class="text-sm text-gray-700 font-light">2026.01.02</p>
                </div>
              </div>

              <button class="btn-ghost px-4 py-2 text-[11px] font-bold uppercase tracking-[0.2em] view-btn">
                상세보기
              </button>
            </div>
          </article>

          <!-- Ticket 2 (Urgent) -->
          <article class="card p-6" data-status="open" data-urgent="true" data-title="가품 의심 신고" data-category="보안/인증" data-order="BD-2026-0102-4821" data-date="2026-01-03">
            <div class="flex items-start gap-5">
              <label class="pt-1">
                <input class="pick" type="checkbox" aria-label="select ticket">
              </label>

              <div class="flex-1">
                <div class="flex items-center gap-2 mb-2 flex-wrap">
                  <span class="badge urgent"><i class="fa-solid fa-shield-halved"></i>Urgent</span>
                  <span class="badge open"><i class="fa-regular fa-circle-dot"></i>Open</span>
                  <span class="badge"><i class="fa-regular fa-folder-open"></i>보안/인증</span>
                  <span class="badge"><i class="fa-regular fa-receipt"></i>Order BD-2026-0102-4821</span>
                </div>

                <button class="ticket-title text-left w-full">
                  <h3 class="text-lg font-medium text-black hover:accent-text transition">가품 의심 신고</h3>
                </button>
                <p class="text-sm text-gray-500 font-light mt-2">
                  수령 전이지만 제공된 정보가 불충분해 가품 의심이 됩니다. 추가 확인 부탁드립니다.
                </p>

                <div class="mt-4 flex items-center justify-between">
                  <p class="text-[11px] uppercase tracking-[0.2em] text-gray-400">Created</p>
                  <p class="text-sm text-gray-700 font-light">2026.01.03</p>
                </div>
              </div>

              <button class="btn-ghost px-4 py-2 text-[11px] font-bold uppercase tracking-[0.2em] view-btn">
                상세보기
              </button>
            </div>
          </article>

          <!-- Ticket 3 (Pending) -->
          <article class="card p-6" data-status="pending" data-urgent="false" data-title="환불 절차 문의" data-category="결제/환불" data-order="-" data-date="2026-01-01">
            <div class="flex items-start gap-5">
              <label class="pt-1">
                <input class="pick" type="checkbox" aria-label="select ticket">
              </label>

              <div class="flex-1">
                <div class="flex items-center gap-2 mb-2 flex-wrap">
                  <span class="badge pending"><i class="fa-regular fa-clock"></i>Pending</span>
                  <span class="badge"><i class="fa-regular fa-folder-open"></i>결제/환불</span>
                  <span class="badge"><i class="fa-regular fa-receipt"></i>Order -</span>
                </div>

                <button class="ticket-title text-left w-full">
                  <h3 class="text-lg font-medium text-black hover:accent-text transition">환불 절차 문의</h3>
                </button>
                <p class="text-sm text-gray-500 font-light mt-2">
                  결제 완료 후 취소/환불 가능한 조건과 진행 절차가 궁금합니다.
                </p>

                <div class="mt-4 flex items-center justify-between">
                  <p class="text-[11px] uppercase tracking-[0.2em] text-gray-400">Created</p>
                  <p class="text-sm text-gray-700 font-light">2026.01.01</p>
                </div>
              </div>

              <button class="btn-ghost px-4 py-2 text-[11px] font-bold uppercase tracking-[0.2em] view-btn">
                상세보기
              </button>
            </div>
          </article>

          <!-- Ticket 4 (Done) -->
          <article class="card p-6" data-status="done" data-urgent="false" data-title="입찰 결제 실패" data-category="결제/입찰" data-order="BD-2026-0101-3110" data-date="2025-12-30">
            <div class="flex items-start gap-5">
              <label class="pt-1">
                <input class="pick" type="checkbox" aria-label="select ticket">
              </label>

              <div class="flex-1">
                <div class="flex items-center gap-2 mb-2 flex-wrap">
                  <span class="badge done"><i class="fa-regular fa-circle-check"></i>Done</span>
                  <span class="badge"><i class="fa-regular fa-folder-open"></i>결제/입찰</span>
                  <span class="badge"><i class="fa-regular fa-receipt"></i>Order BD-2026-0101-3110</span>
                </div>

                <button class="ticket-title text-left w-full">
                  <h3 class="text-lg font-medium text-black hover:accent-text transition">입찰 결제 실패</h3>
                </button>
                <p class="text-sm text-gray-500 font-light mt-2">
                  결제 단계에서 오류가 발생했는데 해결 방법을 안내받았습니다. 감사합니다.
                </p>

                <div class="mt-4 flex items-center justify-between">
                  <p class="text-[11px] uppercase tracking-[0.2em] text-gray-400">Created</p>
                  <p class="text-sm text-gray-700 font-light">2025.12.30</p>
                </div>
              </div>

              <button class="btn-ghost px-4 py-2 text-[11px] font-bold uppercase tracking-[0.2em] view-btn">
                상세보기
              </button>
            </div>
          </article>

        </div>

        <!-- Empty State -->
        <div class="hidden border border-gray-100 bg-white shadow-sm p-14 text-center" id="empty">
          <p class="text-[10px] text-gray-400 uppercase tracking-[0.5em] mb-4">No Tickets</p>
          <h3 class="text-xl font-medium text-black">문의 내역이 없어요</h3>
          <p class="text-sm text-gray-500 font-light mt-3">궁금한 점이 있다면 고객지원에서 1:1 문의를 남겨주세요.</p>
          <div class="flex justify-center mt-10">
            <a href="support.html#ticket" class="btn-outline px-6 py-3 text-[11px] font-bold uppercase tracking-[0.3em]">1:1 문의하기</a>
          </div>
        </div>

      </section>
    </div>
  </main>

  <footer class="mt-24 border-t border-gray-100 py-20 px-10 bg-[#FAF9F8]">
    <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-16 text-sm text-gray-500">
      <div class="space-y-8">
        <div class="text-xl font-bold accent-text tracking-[0.2em] uppercase">Facet</div>
        <p class="leading-relaxed font-light text-[13px]">엄선된 프리미엄 주얼리 경매 및 수공예 펀딩 플랫폼.</p>
      </div>
      <div class="space-y-4">
        <h4 class="text-black font-bold mb-6 uppercase tracking-[0.2em] text-[10px]">Customer Service</h4>
        <a class="block hover:accent-text transition-colors text-[13px]" href="support.html">고객지원</a>
      </div>
      <div class="space-y-4">
        <h4 class="text-black font-bold mb-6 uppercase tracking-[0.2em] text-[10px]">My Account</h4>
        <a class="block hover:accent-text transition-colors text-[13px]" href="orders.html">주문/배송</a>
        <a class="block hover:accent-text transition-colors text-[13px]" href="wishlist.html">위시리스트</a>
        <a class="block hover:accent-text transition-colors text-[13px]" href="support-history.html">문의 내역</a>
      </div>
      <div class="space-y-4">
        <h4 class="text-black font-bold mb-6 uppercase tracking-[0.2em] text-[10px]">Contact</h4>
        <p class="text-[13px]">support@facet.auction</p>
      </div>
    </div>
    <div class="text-center mt-20 text-[10px] text-gray-300 uppercase tracking-[0.5em] border-t border-gray-200 pt-10">
      © 2026 FACET. All Rights Reserved.
    </div>
  </footer>

  <!-- Modal -->
  <div id="backdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-label="ticket detail modal">
    <div class="modal rounded-md overflow-hidden">
      <div class="flex items-center justify-between px-8 py-6 border-b border-gray-100">
        <div>
          <p class="text-[10px] text-gray-400 uppercase tracking-[0.35em]" id="mMeta">Ticket</p>
          <h3 class="text-xl font-medium text-black mt-2" id="mTitle">문의 제목</h3>
        </div>
        <button id="closeModal" class="modal-close" aria-label="close modal">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>

      <div class="p-8 space-y-6">
        <div class="flex flex-wrap gap-2" id="mBadges"></div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div class="border border-gray-100 p-5">
            <p class="text-[10px] text-gray-400 uppercase tracking-[0.2em] mb-2">Category</p>
            <p class="text-sm text-gray-900 font-medium" id="mCategory">-</p>
          </div>
          <div class="border border-gray-100 p-5">
            <p class="text-[10px] text-gray-400 uppercase tracking-[0.2em] mb-2">Order</p>
            <p class="text-sm text-gray-900 font-medium" id="mOrder">-</p>
          </div>
          <div class="border border-gray-100 p-5">
            <p class="text-[10px] text-gray-400 uppercase tracking-[0.2em] mb-2">Created</p>
            <p class="text-sm text-gray-900 font-medium" id="mDate">-</p>
          </div>
        </div>

        <div class="border border-gray-100 p-6">
          <p class="text-[11px] uppercase tracking-[0.25em] text-gray-400 font-bold mb-3">Message</p>
          <p class="text-sm text-gray-600 font-light leading-relaxed" id="mBody">
            문의 내용이 표시됩니다.
          </p>
        </div>

        <div class="border border-gray-100 p-6">
          <p class="text-[11px] uppercase tracking-[0.25em] text-gray-400 font-bold mb-3">Response</p>
          <p class="text-sm text-gray-600 font-light leading-relaxed" id="mReply">
            답변이 등록되면 여기에 표시됩니다.
          </p>
        </div>

        <div class="flex flex-col md:flex-row gap-2 md:justify-end">
          <button class="btn-ghost px-5 py-3 text-[11px] font-bold uppercase tracking-[0.25em]">
            추가 문의
          </button>
          <button class="btn-outline px-5 py-3 text-[11px] font-bold uppercase tracking-[0.25em]">
            문의 수정
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // =========================
    // Support Tickets (기획용 UI 동작 데모)
    // - 필터/검색/정렬/선택 삭제/상세 모달
    // =========================
    const chips = document.querySelectorAll('.chip');
    const list = document.getElementById('list');
    let items = Array.from(document.querySelectorAll('article.card'));
    const search = document.getElementById('search');
    const sort = document.getElementById('sort');
    const empty = document.getElementById('empty');

    const sumOpen = document.getElementById('sumOpen');
    const sumPending = document.getElementById('sumPending');
    const sumDone = document.getElementById('sumDone');

    let activeFilter = 'all';

    function refreshItems(){
      items = Array.from(document.querySelectorAll('article.card'));
    }

    function updateSummary(){
      const open = items.filter(it => it.dataset.status === 'open').length;
      const pending = items.filter(it => it.dataset.status === 'pending').length;
      const done = items.filter(it => it.dataset.status === 'done').length;
      sumOpen.textContent = open;
      sumPending.textContent = pending;
      sumDone.textContent = done;
    }

    function applyFilterAndSearch() {
      const q = (search.value || '').trim().toLowerCase();

      items.forEach(it => {
        const status = it.dataset.status; // open | pending | done
        const urgent = it.dataset.urgent === 'true';
        const title = (it.dataset.title || '').toLowerCase();
        const category = (it.dataset.category || '').toLowerCase();
        const order = (it.dataset.order || '').toLowerCase();

        // filter
        let ok = true;
        if (activeFilter === 'open') ok = status === 'open';
        if (activeFilter === 'pending') ok = status === 'pending';
        if (activeFilter === 'done') ok = status === 'done';
        if (activeFilter === 'urgent') ok = urgent === true;

        // search
        if (q) ok = ok && (title.includes(q) || category.includes(q) || order.includes(q));

        it.classList.toggle('hidden', !ok);
      });

      const any = items.some(it => !it.classList.contains('hidden'));
      empty.classList.toggle('hidden', any);
    }

    function statusRank(s){
      if (s === 'open') return 0;
      if (s === 'pending') return 1;
      return 2; // done
    }

    function applySort() {
      const key = sort.value;
      const parent = list;
      if (!parent) return;

      const sorted = [...items].sort((a, b) => {
        const da = new Date(a.dataset.date);
        const db = new Date(b.dataset.date);

        if (key === 'oldest') return da - db;
        if (key === 'status') {
          const ra = statusRank(a.dataset.status);
          const rb = statusRank(b.dataset.status);
          if (ra !== rb) return ra - rb;
          // 같은 상태면 최신순
          return db - da;
        }
        // recent
        return db - da;
      });

      sorted.forEach(node => parent.appendChild(node));
      refreshItems();
    }

    chips.forEach(chip => {
      chip.addEventListener('click', () => {
        chips.forEach(c => c.classList.remove('active'));
        chip.classList.add('active');
        activeFilter = chip.dataset.filter;
        applyFilterAndSearch();
      });
    });

    search.addEventListener('input', applyFilterAndSearch);

    sort.addEventListener('change', () => {
      applySort();
      applyFilterAndSearch();
    });

    // 선택 삭제 (UI 데모): 체크된 티켓 제거
    const btnDelete = document.getElementById('btnDelete');
    btnDelete.addEventListener('click', () => {
      const checked = document.querySelectorAll('.pick:checked');
      checked.forEach(chk => {
        const card = chk.closest('article.card');
        if (card) card.remove();
      });
      refreshItems();
      updateSummary();
      applyFilterAndSearch();
    });

    // ===== Modal =====
    const backdrop = document.getElementById('backdrop');
    const closeModal = document.getElementById('closeModal');

    const mTitle = document.getElementById('mTitle');
    const mMeta = document.getElementById('mMeta');
    const mBadges = document.getElementById('mBadges');
    const mCategory = document.getElementById('mCategory');
    const mOrder = document.getElementById('mOrder');
    const mDate = document.getElementById('mDate');
    const mBody = document.getElementById('mBody');
    const mReply = document.getElementById('mReply');

    function openModalFromCard(card){
      const title = card.dataset.title || '문의';
      const category = card.dataset.category || '-';
      const order = card.dataset.order || '-';
      const date = card.dataset.date || '-';
      const status = card.dataset.status || 'open';
      const urgent = card.dataset.urgent === 'true';

      // fill
      mTitle.textContent = title;
      mMeta.textContent = `Ticket · ${status.toUpperCase()}`;
      mCategory.textContent = category;
      mOrder.textContent = order;
      mDate.textContent = date.replaceAll('-', '.');

      // badges
      mBadges.innerHTML = '';
      if (urgent){
        const b = document.createElement('span');
        b.className = 'badge urgent';
        b.innerHTML = '<i class="fa-solid fa-shield-halved"></i>Urgent';
        mBadges.appendChild(b);
      }
      const b2 = document.createElement('span');
      b2.className = `badge ${status === 'open' ? 'open' : status === 'pending' ? 'pending' : 'done'}`;
      b2.innerHTML = status === 'open'
        ? '<i class="fa-regular fa-circle-dot"></i>Open'
        : status === 'pending'
          ? '<i class="fa-regular fa-clock"></i>Pending'
          : '<i class="fa-regular fa-circle-check"></i>Done';
      mBadges.appendChild(b2);

      const b3 = document.createElement('span');
      b3.className = 'badge';
      b3.innerHTML = '<i class="fa-regular fa-folder-open"></i>' + category;
      mBadges.appendChild(b3);

      const b4 = document.createElement('span');
      b4.className = 'badge';
      b4.innerHTML = '<i class="fa-regular fa-receipt"></i>Order ' + order;
      mBadges.appendChild(b4);

      // body/reply (데모)
      const snippet = card.querySelector('p.text-sm.text-gray-500')?.textContent?.trim() || '문의 내용';
      mBody.textContent = snippet;

      if (status === 'done'){
        mReply.textContent = '안녕하세요. Facet 컨시어지입니다. 안내드린 절차에 따라 조치가 완료되었습니다. 추가 문의가 있다면 편하게 남겨주세요.';
      } else if (status === 'pending'){
        mReply.textContent = '담당 부서 확인 중입니다. 영업일 기준 24시간 이내 답변드리겠습니다.';
      } else {
        mReply.textContent = '문의 접수 완료되었습니다. 담당자가 확인 후 순차적으로 답변드리겠습니다.';
      }

      backdrop.classList.add('show');
    }

    document.querySelectorAll('.view-btn, .ticket-title').forEach(btn => {
      btn.addEventListener('click', (e) => {
        const card = e.target.closest('article.card');
        if (!card) return;
        openModalFromCard(card);
      });
    });

    function close(){
      backdrop.classList.remove('show');
    }
    closeModal.addEventListener('click', close);
    backdrop.addEventListener('click', (e) => {
      if (e.target === backdrop) close();
    });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') close();
    });

    // init
    applySort();
    refreshItems();
    updateSummary();
    applyFilterAndSearch();
  </script>
</body>
</html>